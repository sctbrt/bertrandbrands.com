---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeaderCanonical from '../components/HeaderCanonical.astro';
import SkipLink from '../components/SkipLink.astro';
import VisitorNotify from '../components/VisitorNotify.astro';
import GesturePrevention from '../components/GesturePrevention.astro';

const currentYear = new Date().getFullYear();

const schemaJson = {
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "Bertrand Group | Brand & Web Systems",
  "description": "Clear, structured brand and web work for businesses that value clarity. Reviews, brand systems, and website foundations. Based in Greater Sudbury, Ontario.",
  "url": "https://bertrandbrands.ca",
  "email": "hello@bertrandgroup.ca",
  "telephone": "+17054133705",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Greater Sudbury",
    "addressRegion": "Ontario",
    "addressCountry": "CA"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 46.4917,
    "longitude": -80.9930
  },
  "areaServed": [
    { "@type": "City", "name": "Greater Sudbury", "containedInPlace": { "@type": "AdministrativeArea", "name": "Ontario" } },
    { "@type": "AdministrativeArea", "name": "Northern Ontario" },
    { "@type": "Country", "name": "Canada" }
  ],
  "priceRange": "$750 - $6,500+ CAD",
  "sameAs": [
    "https://linkedin.com/in/sudburyon"
  ],
  "founder": {
    "@type": "Person",
    "name": "Scott Bertrand",
    "url": "https://scottbertrand.com"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Brand & Digital Systems Services",
    "itemListElement": [
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Guided Intake" }, "description": "Form-based intake for routing and clarity" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Clarity Session" }, "description": "45-minute working session — brand, web, or systems", "price": "145", "priceCurrency": "CAD" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Technical Feasibility Check" }, "description": "Verbal assessment of technical viability" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Starter Site" }, "price": "750", "priceCurrency": "CAD" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "One-Page System Redesign" }, "price": "1250", "priceCurrency": "CAD" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Brandmark & Visual Identity" }, "price": "950", "priceCurrency": "CAD" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Brand System Reset" }, "description": "Strategic brand diagnosis, realignment, and implementation roadmap" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Digital Platform Build" }, "description": "Full-stack digital platform with authentication, dashboards, and scalable architecture" },
      { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Integrated Brand + Platform" }, "description": "Brand-informed technical design and system-aware brand execution" }
    ]
  }
};
---

<BaseLayout
  title="Bertrand Group | Brand & Web Systems — Sudbury, Ontario"
  description="Brand and web systems studio based in Greater Sudbury, Ontario. Starter sites, custom redesigns, brandmarks, and strategic brand work. Clear scope, fixed pricing, fast turnaround. Serving Sudbury, Northern Ontario, and across Canada."
  canonical="https://bertrandbrands.ca/"
  ogTitle="Bertrand Group | Brand & Web Systems — Sudbury, Ontario"
  ogDescription="Brand and web systems studio based in Greater Sudbury, Ontario. Clear scope, fixed pricing, fast turnaround. Serving Northern Ontario and across Canada."
  schemaJson={schemaJson}
>
  <Fragment slot="head">
    <link rel="stylesheet" href="/styles/pricing-modal.css" />
    <link rel="stylesheet" href="/styles/founder-lightbox.css" />
  </Fragment>

  <SkipLink />
  <div class="cursor-glow" id="cursorGlow"></div>

  <!-- Cinematic Intro -->
  <div class="intro">
      <div class="intro__glow intro__glow--orange"></div>
      <div class="intro__glow intro__glow--blue"></div>
      <div class="intro__fade"></div>
      <div class="intro__grid"></div>
      <img src="/assets/bg-brands-logomark.png" alt="" class="intro__logo" width="256" height="256" fetchpriority="high">
      <div class="intro__brand">
          <span class="intro__brand-main">Bertrand</span>
          <span class="intro__brand-main">Brands</span>
          <span class="intro__brand-sub">Brand &amp; Web Systems</span>
          <span class="intro__brand-division">a division of Bertrand Group Canada</span>
      </div>
      <div class="intro__scroll-hint">
          <span class="intro__scroll-hint-text">Tap anywhere to begin</span>
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
      </div>
  </div>

  <div class="page">
      <!-- Header -->
      <HeaderCanonical />

      <!-- Hero -->
      <section class="hero" id="main-content">
          <div class="hero__bg">
              <div class="hero__gradient hero__gradient--1"></div>
              <div class="hero__gradient hero__gradient--2"></div>
              <div class="hero__grid"></div>
          </div>
          <div class="hero__spotlight hero__spotlight--orange"></div>
          <div class="hero__spotlight hero__spotlight--blue"></div>
          <div class="hero__spotlight hero__spotlight--violet"></div>

          <div class="hero__content">
              <h1 class="hero__title">
                  <span class="hero__title-glow">Brand &</span>
                  <span><span class="hero__title-glow">Web</span> <span class="accent">Systems</span></span>
              </h1>
              <p class="hero__subtitle">
                  Clear, structured work for businesses that value clarity over noise.
                  <span class="hero__subtitle-glow">Based in Sudbury</span>, available across Canada.
              </p>
              <a href="/book" class="hero__cta">Book a Call</a>
          </div>
          <div class="hero__scroll-hint">
              <span class="hero__scroll-hint-text"><span class="hint-desktop">Scroll to explore</span><span class="hint-mobile">Swipe to explore</span></span>
              <svg class="hero__scroll-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M12 5v14M5 12l7 7 7-7"/>
              </svg>
          </div>
      </section>

      <!-- About -->
      <section class="section" id="about">
          <div class="container">
              <div class="section__header section__header--about reveal">
                  <p class="section__label">About</p>
                  <h2 class="section__title">Forward thinking, <span class="text-spotlight text-spotlight--focused">focused</span> work</h2>
              </div>

              <div class="about reveal">
                  <div class="about__content">
                      <p class="about__text">Bertrand Group is a design studio for businesses who know their brand or website needs work—but aren't sure where to start.</p>
                      <p class="about__text">We create clarity. Through structured reviews, brand systems, and conversion-focused websites, we help you understand what's working, what isn't, and what to do next.</p>
                      <p class="about__text">Based in Greater Sudbury, serving Northern Ontario and clients across Canada.</p>
                  </div>
                  <div class="about__cta">
                      <button type="button" class="about__cta-link" data-founder-trigger>
                          <span class="about__cta-label">Who's behind the work</span>
                          <span class="about__cta-name">About the Studio →</span>
                      </button>
                  </div>
              </div>
          </div>
      </section>

      <!-- Process (How It Works) -->
      <section class="section section--alt section--process" id="process">
          <div class="container">
              <div class="section__header section__header--process reveal">
                  <p class="section__label">How It Works</p>
                  <h2 class="section__title section__title--clear-phrase"><span class="text-fade">A&nbsp;</span><span class="text-spotlight text-spotlight--clear">clear</span><span class="text-fade">&nbsp;path&nbsp;towards&nbsp;what's&nbsp;next</span></h2>
                  <p class="section__scope">Regardless of where you're starting</p>

                  <!-- Process Journey Visual -->
                  <div class="process-journey">
                      <div class="process-journey__step" data-tooltip="01 — You share context via a guided intake">
                          <svg class="process-journey__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M9 11V6a3 3 0 0 1 6 0v5"/>
                              <rect x="4" y="11" width="16" height="10" rx="2"/>
                          </svg>
                          <span class="process-journey__label">01 — Share context</span>
                      </div>
                      <div class="process-journey__connector"></div>
                      <div class="process-journey__step" data-tooltip="02 — We analyze your inputs across brand, web, and systems">
                          <svg class="process-journey__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <circle cx="11" cy="11" r="8"/>
                              <path d="m21 21-4.3-4.3"/>
                          </svg>
                          <span class="process-journey__label">02 — Analyze</span>
                      </div>
                      <div class="process-journey__connector"></div>
                      <div class="process-journey__step" data-tooltip="03 — You receive a written direction brief with priorities">
                          <svg class="process-journey__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                              <polyline points="14 2 14 8 20 8"/>
                              <line x1="16" y1="13" x2="8" y2="13"/>
                              <line x1="16" y1="17" x2="8" y2="17"/>
                          </svg>
                          <span class="process-journey__label">03 — Direction brief</span>
                      </div>
                      <div class="process-journey__connector"></div>
                      <div class="process-journey__step" data-tooltip="04 — Optional clarification call to walk through findings">
                          <svg class="process-journey__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                          </svg>
                          <span class="process-journey__label">04 — Clarify</span>
                      </div>
                      <div class="process-journey__connector"></div>
                      <div class="process-journey__step process-journey__step--final" data-tooltip="05 — You move forward with a clear next step">
                          <svg class="process-journey__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <polyline points="20 6 9 17 4 12"/>
                          </svg>
                          <span class="process-journey__label">05 — Move forward</span>
                      </div>
                  </div>

                  <p class="process-journey__note">Every engagement follows a defined process that results in clear, written direction — no surprises, no scope creep.</p>
              </div>
          </div>
      </section>

      <!-- Services -->
      <section class="section section--alt" id="services">
          <div class="container">
              <div class="section__header section__header--services reveal">
                  <p class="section__label">Services</p>
                  <h2 class="section__title">What we offer</h2>
              </div>

              <!-- SECTION 1: B CONVERSATION (TIER 1) -->
              <div class="exploratory-sessions reveal" id="exploratory">
                  <div class="exploratory-sessions__header">
                      <a href="/exploratory" class="exploratory-sessions__brand">
                          <img src="/assets/bg-brands-logomark.png" alt="" class="exploratory-sessions__mark" width="40" height="40" loading="lazy">
                          <span class="exploratory-sessions__name">Conversation</span>
                      </a>
                      <p class="exploratory-sessions__label">Not sure where to start?</p>
                      <p class="exploratory-sessions__description">Start with a guided intake, a paid Clarity Session, or a technical feasibility check. No obligations — just focused guidance to help you decide what's next.</p>
                  </div>

                  <div class="exploratory-sessions__grid">
                      <!-- Guided Intake -->
                      <div class="exploratory-sessions__card" data-icon="compass">
                          <div class="exploratory-sessions__card-header">
                              <h3 class="exploratory-sessions__card-title">Guided Intake</h3>
                              <span class="exploratory-sessions__card-meta">Form-based · Free</span>
                          </div>
                          <p class="exploratory-sessions__card-description">A structured form to clarify what you need and route you to the right service. No call required — takes about 5 minutes.</p>
                          <div class="exploratory-sessions__card-footer">
                              <a href="/exploratory" class="exploratory-sessions__card-cta">Start intake →</a>
                          </div>
                      </div>

                      <!-- Clarity Session -->
                      <div class="exploratory-sessions__card" data-icon="lightbulb">
                          <div class="exploratory-sessions__card-header">
                              <h3 class="exploratory-sessions__card-title">Clarity Session</h3>
                              <span class="exploratory-sessions__card-meta">~45 min · $145 CAD</span>
                          </div>
                          <p class="exploratory-sessions__card-description">A working session focused on your brand, website, or systems. Walk away with diagnosis, direction, and a short written recap. Unlocks Build or Transformation.</p>
                          <div class="exploratory-sessions__card-footer">
                              <a href="/exploratory" class="exploratory-sessions__card-cta">Book a session →</a>
                          </div>
                      </div>

                      <!-- Technical Feasibility Check -->
                      <div class="exploratory-sessions__card" data-icon="settings">
                          <div class="exploratory-sessions__card-header">
                              <h3 class="exploratory-sessions__card-title">Technical Feasibility Check</h3>
                              <span class="exploratory-sessions__card-meta">Verbal · By request</span>
                          </div>
                          <p class="exploratory-sessions__card-description">A verbal assessment of technical viability for your project. No code, no audit — just an honest evaluation of what's possible and what's not.</p>
                          <div class="exploratory-sessions__card-footer">
                              <a href="/exploratory" class="exploratory-sessions__card-cta">Learn more →</a>
                          </div>
                      </div>
                  </div>
              </div>

              <hr class="services-divider services-divider--section">

              <!-- SECTION 2: B BUILD (TIER 2) -->
              <div class="focused-studio reveal" id="focus-studio">
                  <div class="focused-studio__glow" aria-hidden="true"></div>
                  <div class="focused-studio__header">
                      <a href="/focus-studio" class="focused-studio__brand">
                          <img src="/assets/bg-brands-logomark.png" alt="" class="focused-studio__mark" width="40" height="40" loading="lazy">
                          <span class="focused-studio__name">Build</span>
                      </a>
                      <p class="focused-studio__description">Focused, fixed-scope studio work for immediate clarity and impact. Clear scope, clear timelines, clear outcomes.</p>
                  </div>

                  <div class="focused-studio__grid">
                      <!-- Starter Site -->
                      <div class="focused-studio__card" data-icon="rocket">
                          <div class="focused-studio__card-header">
                              <h3 class="focused-studio__card-title">Starter Site</h3>
                              <span class="focused-studio__card-timeline">1 business day</span>
                          </div>
                          <p class="focused-studio__card-description">A fast-launch website built for speed and simplicity. Clean, functional, and live quickly — ideal for businesses that need a professional presence without complexity.</p>
                          <ul class="focused-studio__card-includes">
                              <li>Structured, mobile-friendly layout</li>
                              <li>Clear messaging and contact flow</li>
                              <li>Fast turnaround with managed hosting</li>
                              <li>Easy to update and maintain</li>
                          </ul>
                          <p class="focused-studio__card-best-for">Best for early-stage businesses that need something clean and live quickly.</p>
                          <div class="focused-studio__card-footer">
                              <p class="focused-studio__card-price">$750 <span>CAD</span></p>
                              <a href="/starter-site" class="focused-studio__card-cta">Learn More →</a>
                          </div>
                      </div>

                      <!-- One-Page Redesign -->
                      <div class="focused-studio__card" data-icon="code">
                          <div class="focused-studio__card-header">
                              <h3 class="focused-studio__card-title">One-Page System Redesign</h3>
                              <span class="focused-studio__card-timeline">2–3 business days</span>
                          </div>
                          <p class="focused-studio__card-description">A fully custom, code-based one-page website. Designed and built from scratch — no templates, no builders. Focused on narrative flow, layout precision, and polish.</p>
                          <ul class="focused-studio__card-includes">
                              <li>Custom code — no templates or builders</li>
                              <li>One scroll-based, mobile-first page</li>
                              <li>Clear message and structure</li>
                              <li>Contact or booking call-to-action</li>
                          </ul>
                          <p class="focused-studio__card-best-for">Best for founders, consultants, and service businesses that want something crafted.</p>
                          <div class="focused-studio__card-footer">
                              <p class="focused-studio__card-price">$1,250 <span>CAD</span></p>
                              <a href="/one-page-redesign" class="focused-studio__card-cta">Learn More →</a>
                          </div>
                      </div>

                      <!-- Brandmark & Visual Identity -->
                      <div class="focused-studio__card" data-icon="pen">
                          <div class="focused-studio__card-header">
                              <h3 class="focused-studio__card-title">Brandmark & Visual Identity</h3>
                              <span class="focused-studio__card-timeline">5–7 business days</span>
                          </div>
                          <p class="focused-studio__card-description">A complete, usable brandmark with supporting visual direction. Designed to work wherever your brand appears — core brandmarking, not a full brand system.</p>
                          <ul class="focused-studio__card-includes">
                              <li>Primary brandmark + supporting variations</li>
                              <li>Horizontal, stacked, and icon versions</li>
                              <li>Web + print files (SVG, PNG, PDF, EPS)</li>
                              <li>Core visual direction + usage guidance</li>
                          </ul>
                          <p class="focused-studio__card-best-for">Best for businesses that need a credible, flexible mark without a full rebrand.</p>
                          <div class="focused-studio__card-footer">
                              <p class="focused-studio__card-price">$950 <span>CAD</span></p>
                              <a href="/brandmark" class="focused-studio__card-cta">Learn More →</a>
                          </div>
                      </div>
                  </div>

                  <p class="focused-studio__boundary">B Build engagements are intentionally fixed-scope. No integrations, dashboards, or bespoke functionality. Full brand systems, strategy, and multi-phase work are scoped under Transformation.</p>
              </div>

              <hr class="services-divider services-divider--section">

              <!-- SECTION 3: B TRANSFORMATION (TIER 3) -->
              <div class="core-systems-wrapper">
                  <div class="core-systems__glow" aria-hidden="true"></div>

                  <div class="core-systems reveal">
                      <a href="/core-systems" class="core-systems__brand">
                          <img src="/assets/bg-brands-logomark.png" alt="" class="core-systems__mark" width="40" height="40" loading="lazy">
                          <span class="core-systems__name">Transformation</span>
                      </a>
                      <p class="core-systems__description">Custom brand and digital systems. Discovery-led, multi-week engagements. 50% deposit to begin, 50% on delivery.</p>
                  </div>

                  <!-- Pricing Access Banner -->
                  <div class="pricing-banner" id="pricingBanner" style="display: none;">
                      <p class="pricing-banner__text">Pricing access active for <span id="pricingTimeRemaining">~60</span> minutes</p>
                  </div>

                  <!-- Transformation — 3-card grid -->
                  <div class="services services--core reveal-stagger">
                      <div class="service" data-gated="false" data-icon="refresh">
                          <p class="service__number">01</p>
                          <h3 class="service__title">Brand System Reset</h3>
                          <p class="service__description">Strategic brand diagnosis, realignment, and implementation roadmap. Identity refinement with written findings.</p>
                          <div class="service__footer">
                              <p class="service__price service__price--private">Private pricing</p>
                              <a href="/brand-system-reset" class="service__cta">Learn More →</a>
                          </div>
                      </div>

                      <div class="service" data-gated="false" data-icon="layers">
                          <p class="service__number">02</p>
                          <h3 class="service__title">Digital Platform Build</h3>
                          <p class="service__description">Full-stack digital platform with authentication, dashboards, and scalable architecture. Designed as a system, not a page.</p>
                          <div class="service__footer">
                              <p class="service__price service__price--private">Private pricing</p>
                              <a href="/digital-platform-build" class="service__cta">Learn More →</a>
                          </div>
                      </div>

                      <div class="service" data-gated="false" data-icon="grid">
                          <p class="service__number">03</p>
                          <h3 class="service__title">Integrated Brand + Platform</h3>
                          <p class="service__description">Brand-informed technical design meets system-aware brand execution. Strategy, identity, and platform delivered as one.</p>
                          <div class="service__footer">
                              <p class="service__price service__price--private">Private pricing</p>
                              <a href="/integrated-brand-platform" class="service__cta">Learn More →</a>
                          </div>
                      </div>
                  </div>
              </div>

          </div>
      </section>

      <!-- Selected Work -->
      <section class="section" id="work">
          <div class="container">
              <div class="section__header reveal">
                  <p class="section__label">Selected Work</p>
                  <h2 class="section__title">scottbertrand.com</h2>
              </div>

              <div class="work reveal">
                  <div class="work__item work__item--scottbertrand">
                      <div class="work__spotlights" aria-hidden="true">
                          <span class="work__spotlight work__spotlight--red"></span>
                          <span class="work__spotlight work__spotlight--yellow"></span>
                          <span class="work__spotlight work__spotlight--green"></span>
                          <span class="work__spotlight work__spotlight--blue"></span>
                      </div>
                      <p class="work__label">Brand & Website System</p>
                      <h3 class="work__title">ScottBertrand.com</h3>
                      <p class="work__description">A purpose-built brand and website system designed to demonstrate how clarity, structure, and restraint can work together in a modern digital presence. The project prioritizes clear entry points and decision flow, strong typographic hierarchy, and subtle interaction used with intent.</p>
                      <a href="https://scottbertrand.com" class="work__link" target="_blank" rel="noopener">
                          View site
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <line x1="5" y1="12" x2="19" y2="12"></line>
                              <polyline points="12 5 19 12 12 19"></polyline>
                          </svg>
                      </a>
                  </div>
              </div>
          </div>
      </section>

      <!-- Contact -->
      <section class="section section--alt" id="contact">
          <div class="container">
              <div class="contact reveal">
                  <div class="contact__spotlight contact__spotlight--violet" aria-hidden="true"></div>
                  <div class="contact__spotlight contact__spotlight--blue" aria-hidden="true"></div>
                  <h2 class="contact__title">Get in touch</h2>
                  <p class="contact__subtitle">Have a question or want to discuss something specific? Send us a message and we'll respond within 1-2 business days.</p>

                  <form class="contact-form" action="https://formspree.io/f/xnjjgoay" method="POST">
                      <input type="hidden" name="source" value="homepage_contact">
                      <input type="text" name="_gotcha" class="form-honeypot" tabindex="-1" autocomplete="off">
                      <input type="hidden" name="_subject" value="New Contact — Homepage">

                      <div class="contact-form__group">
                          <label class="contact-form__label" for="name">Name</label>
                          <input class="contact-form__input" type="text" id="name" name="name" required placeholder="Your name">
                      </div>

                      <div class="contact-form__group">
                          <label class="contact-form__label" for="email">Email</label>
                          <input class="contact-form__input" type="email" id="email" name="email" required placeholder="you@example.com">
                      </div>

                      <div class="contact-form__group">
                          <label class="contact-form__label" for="message">Message</label>
                          <textarea class="contact-form__textarea" id="message" name="message" required placeholder="What's on your mind?"></textarea>
                      </div>

                      <button class="contact-form__submit" type="submit">Send Message</button>
                      <div class="contact-form__feedback" id="formFeedback"></div>
                  </form>

                  <p class="contact__email-fallback">Or email directly: <a href="mailto:hello@bertrandgroup.ca">hello@bertrandgroup.ca</a></p>
              </div>
          </div>
      </section>

      <!-- Client Portal -->
      <section class="section" id="portal">
          <div class="container">
              <div class="portal reveal">
                  <div class="portal__content">
                      <h2 class="portal__title">Client Portal</h2>
                      <p class="portal__description">A dedicated space for active clients to access project files, timelines, and communication.</p>
                      <a href="https://clients.bertrandgroup.ca" class="portal__link">Access Portal →</a>
                  </div>
              </div>
          </div>
      </section>

      <!-- Footer -->
      <footer class="footer">
          <div class="container">
              <div class="footer__logomark">
                  <img src="/assets/bg-brands-logomark.png" alt="" class="footer__logomark-img" width="40" height="40" loading="lazy">
              </div>
              <div class="footer__inner">
                  <div class="footer__left">
                      <p class="footer__copyright">&copy; {currentYear} Bertrand Group. All rights reserved.</p>
                      <p class="footer__parent"><a href="https://bertrandgroup.ca">A division of Bertrand Group Canada</a></p>
                  </div>
                  <div class="footer__contact">
                      <a href="mailto:hello@bertrandgroup.ca" class="footer__link">hello@bertrandgroup.ca</a>
                      <a href="tel:+17054133705" class="footer__link footer__link--phone phone-link__mobile">(705) 413-3705</a>
                      <span class="footer__link footer__link--phone phone-link__desktop">705-413-3705</span>
                  </div>
              </div>
          </div>
      </footer>
  </div>

  <!-- Pricing Access Modal -->
  <div class="pricing-modal" id="pricingModal" role="dialog" aria-modal="true" aria-labelledby="pricingModalTitle">
      <div class="pricing-modal__backdrop" data-pricing-close></div>
      <div class="pricing-modal__content">
          <button type="button" class="pricing-modal__close" data-pricing-close aria-label="Close modal">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
          </button>
          <h2 class="pricing-modal__title" id="pricingModalTitle">Get Pricing Details</h2>
          <p class="pricing-modal__description">Enter your email to receive a link to view pricing for our advanced services. Pricing varies by scope—this gives you a starting point.</p>
          <form class="pricing-modal__form" id="pricingRequestForm">
              <div class="pricing-modal__group">
                  <label class="pricing-modal__label" for="pricingFirstName">First Name <span class="pricing-modal__optional">(optional)</span></label>
                  <input class="pricing-modal__input" type="text" id="pricingFirstName" name="firstName" placeholder="Your first name" autocomplete="given-name">
              </div>
              <div class="pricing-modal__group">
                  <label class="pricing-modal__label" for="pricingEmail">Email</label>
                  <input class="pricing-modal__input" type="email" id="pricingEmail" name="email" required placeholder="you@example.com" autocomplete="email">
                  <div class="pricing-modal__error" id="pricingEmailError"></div>
              </div>
              <button type="submit" class="pricing-modal__submit" id="pricingSubmitBtn">Send Link</button>
          </form>
          <div class="pricing-modal__success" id="pricingSuccess" style="display: none;">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="9 12 11 14 15 10"></polyline>
              </svg>
              <h3>Check your email</h3>
              <p>We've sent a link to view pricing. It expires in 15 minutes.</p>
          </div>
      </div>
  </div>

  <!-- Studio Lightbox -->
  <div class="founder-lightbox" id="founderLightbox" role="dialog" aria-modal="true" aria-labelledby="founderLightboxTitle">
      <div class="founder-lightbox__backdrop" data-founder-close></div>
      <div class="founder-lightbox__content">
          <button type="button" class="founder-lightbox__close" data-founder-close aria-label="Close">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
          </button>
          <h2 class="founder-lightbox__title" id="founderLightboxTitle">Scott Bertrand</h2>
          <p class="founder-lightbox__role">Founder & Creative / Strategic Lead</p>
          <p class="founder-lightbox__text">I'm Scott Bertrand — a brand and web systems builder based in Northern Ontario. I design calm, premium digital experiences and build the structure behind them so they stay clear, consistent, and easy to run.</p>
          <p class="founder-lightbox__text">I lead Bertrand Group, where I help founders refine identity, rebuild websites, and install durable systems that hold up in the real world. My focus is clarity over cleverness, structure over noise, and work that feels finished — and stays that way.</p>
          <hr class="founder-lightbox__divider">
          <h3 class="founder-lightbox__title">Devin Major</h3>
          <p class="founder-lightbox__role">Full-Stack Developer & Architect</p>
          <p class="founder-lightbox__text">Devin is a full-stack software developer and architect — translating strategy and creative direction into durable, high-performance systems. Architecture, data, security, and maintainability.</p>
          <hr class="founder-lightbox__divider">
          <p class="founder-lightbox__studio-line">Clients work with Bertrand Group as a studio — with Scott leading strategy and direction, and the team executing the systems behind it.</p>
          <a href="/scottbertrand" class="founder-lightbox__cta">Learn more about Scott →</a>
      </div>
  </div>

  <script is:inline>
      // Intro option toggle (use ?intro=2 for option 2)
      (function() {
          var params = new URLSearchParams(window.location.search);
          if (params.get('intro') === '2') {
              var introEl = document.querySelector('.intro');
              if (introEl) introEl.classList.add('intro--option2');
          }
      })();

      // Cursor glow
      (function() {
          var glow = document.getElementById('cursorGlow');
          if (!glow) return;
          var isMobile = window.matchMedia('(max-width: 768px)').matches;
          if (isMobile) { glow.style.display = 'none'; return; }
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) { glow.style.display = 'none'; return; }
          if (!window.matchMedia('(hover: hover) and (pointer: fine)').matches) { glow.style.display = 'none'; return; }

          var mouseX = 0, mouseY = 0, glowX = 0, glowY = 0;
          var isAnimating = false;

          document.addEventListener('mousemove', function(e) {
              mouseX = e.clientX;
              mouseY = e.clientY;
              if (!isAnimating) {
                  isAnimating = true;
                  animate();
              }
          });

          function animate() {
              glowX += (mouseX - glowX) * 0.08;
              glowY += (mouseY - glowY) * 0.08;
              glow.style.left = glowX + 'px';
              glow.style.top = glowY + 'px';

              if (Math.abs(mouseX - glowX) > 0.5 || Math.abs(mouseY - glowY) > 0.5) {
                  requestAnimationFrame(animate);
              } else {
                  isAnimating = false;
              }
          }
      })();

      // Scroll reveal
      (function() {
          var reveals = document.querySelectorAll('.reveal, .reveal-stagger');
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              reveals.forEach(function(el) { el.classList.add('is-visible'); });
              document.querySelectorAll('.section--process').forEach(function(el) { el.classList.add('reveal-triggered'); });
              return;
          }
          var observer = new IntersectionObserver(function(entries) {
              entries.forEach(function(entry) { if (entry.isIntersecting) entry.target.classList.add('is-visible'); });
          }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
          reveals.forEach(function(el) { observer.observe(el); });

          var sectionObserver = new IntersectionObserver(function(entries) {
              entries.forEach(function(entry) { if (entry.isIntersecting) entry.target.classList.add('reveal-triggered'); });
          }, { threshold: 0.15 });
          document.querySelectorAll('.section--process').forEach(function(el) { sectionObserver.observe(el); });
      })();

      // Mobile menu toggle with focus trap
      (function() {
          var toggle = document.querySelector('.header__toggle');
          var nav = document.querySelector('.header__nav');
          var navLinks = document.querySelectorAll('.header__link');

          if (!toggle || !nav) return;

          function getFocusableElements() {
              return nav.querySelectorAll('a, button');
          }

          function openMenu() {
              nav.classList.add('is-open');
              toggle.classList.add('is-open');
              toggle.setAttribute('aria-expanded', 'true');
              document.body.style.overflow = 'hidden';
              var firstLink = nav.querySelector('.header__link');
              if (firstLink) firstLink.focus();
          }

          function closeMenu() {
              nav.classList.remove('is-open');
              toggle.classList.remove('is-open');
              toggle.setAttribute('aria-expanded', 'false');
              document.body.style.overflow = '';
              toggle.focus();
          }

          toggle.addEventListener('click', function(e) {
              e.preventDefault();
              var isOpen = nav.classList.contains('is-open');
              if (isOpen) { closeMenu(); } else { openMenu(); }
          });

          navLinks.forEach(function(link) {
              link.addEventListener('click', closeMenu);
          });

          nav.addEventListener('keydown', function(e) {
              if (!nav.classList.contains('is-open')) return;

              if (e.key === 'Escape') {
                  closeMenu();
                  return;
              }

              if (e.key === 'Tab') {
                  var focusable = getFocusableElements();
                  var firstFocusable = focusable[0];
                  var lastFocusable = focusable[focusable.length - 1];

                  if (e.shiftKey) {
                      if (document.activeElement === firstFocusable) {
                          e.preventDefault();
                          lastFocusable.focus();
                      }
                  } else {
                      if (document.activeElement === lastFocusable) {
                          e.preventDefault();
                          firstFocusable.focus();
                      }
                  }
              }
          });

          // Gentle pulse on hamburger after 5-6 seconds (mobile only)
          var hasInteracted = false;
          var pulseTimer = null;
          var pulseStarted = false;

          function startPulseTimer() {
              if (window.innerWidth > 768 || pulseStarted) return;
              pulseStarted = true;

              pulseTimer = setTimeout(function() {
                  if (!hasInteracted && !nav.classList.contains('is-open')) {
                      toggle.classList.add('header__toggle--pulse');
                      setTimeout(function() {
                          toggle.classList.remove('header__toggle--pulse');
                      }, 4500);
                  }
              }, 5500);
          }

          function cancelPulse() {
              hasInteracted = true;
              if (pulseTimer) clearTimeout(pulseTimer);
              toggle.classList.remove('header__toggle--pulse');
          }

          toggle.addEventListener('click', cancelPulse);

          if (document.body.classList.contains('intro-scrolled')) {
              startPulseTimer();
          } else {
              var bodyObserver = new MutationObserver(function(mutations) {
                  if (document.body.classList.contains('intro-scrolled')) {
                      startPulseTimer();
                      bodyObserver.disconnect();
                  }
              });
              bodyObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });
          }
      })();

      // Clickable service cards
      (function() {
          document.querySelectorAll('.exploratory-sessions__card').forEach(function(card) {
              card.addEventListener('click', function(e) {
                  if (e.target.closest('a, button')) return;
                  var link = card.querySelector('.exploratory-sessions__card-cta');
                  if (link) window.location.href = link.href;
              });
          });

          document.querySelectorAll('.service').forEach(function(card) {
              card.addEventListener('click', function(e) {
                  if (e.target.closest('a, button')) return;
                  var link = card.querySelector('.service__cta');
                  if (link) window.location.href = link.href;
              });
          });

          document.querySelectorAll('.focused-studio__card').forEach(function(card) {
              card.addEventListener('click', function(e) {
                  if (e.target.closest('a, button')) return;
                  var link = card.querySelector('.focused-studio__card-cta');
                  if (link) window.location.href = link.href;
              });
          });
      })();
  </script>

  <script is:inline>
      // Cinematic intro animation
      (function() {
          var header = document.querySelector('.header');
          var headerGlass = document.querySelector('.header__glass');
          var logo = document.querySelector('.header__logo');
          var intro = document.querySelector('.intro');

          // Smooth wordmark crossfade: BERTRAND BRANDS ←→ BERTRAND BRANDS | Brand & Web Systems
          var wmWrap = document.querySelector('.header__wordmark');
          var wmCollapseTimer = null;
          var wmExpandTimer = null;

          function wmExpand() {
              if (wmWrap) wmWrap.classList.add('is-expanded');
          }
          function wmCollapse() {
              if (wmWrap) wmWrap.classList.remove('is-expanded');
          }

          function initWordmark() {
              if (!wmWrap) return;
              var reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
              wmWrap.style.opacity = '1';
              if (reducedMotion) return;

              wmExpandTimer = setTimeout(function() {
                  wmExpand();
                  wmCollapseTimer = setTimeout(function() {
                      wmCollapse();
                  }, 8000);
              }, 4000);

              var logoLink = document.querySelector('.header__logo');
              if (logoLink && window.matchMedia('(hover: hover) and (min-width: 769px)').matches) {
                  logoLink.addEventListener('mouseenter', function() {
                      clearTimeout(wmExpandTimer);
                      clearTimeout(wmCollapseTimer);
                      wmExpand();
                  });
                  logoLink.addEventListener('mouseleave', function() {
                      clearTimeout(wmCollapseTimer);
                      wmCollapseTimer = setTimeout(function() {
                          wmCollapse();
                      }, 1500);
                  });
              }
          }

          // Set intro variant from URL param
          var params = new URLSearchParams(window.location.search);
          var introVariant = params.get('intro') || 'a';
          if (intro && ['a', 'b', 'c', 'd'].includes(introVariant)) {
              intro.setAttribute('data-intro-variant', introVariant);
              document.body.setAttribute('data-intro-variant', introVariant);
          }

          // Variant D: time-aware period
          if (introVariant === 'd') {
              var now = new Date();
              var eastern = new Date(now.toLocaleString('en-US', { timeZone: 'America/Toronto' }));
              var hour = eastern.getHours();
              var period = 'night';
              if (hour >= 6 && hour < 12) period = 'morning';
              else if (hour >= 12 && hour < 18) period = 'afternoon';
              else if (hour >= 18 && hour < 21) period = 'evening';
              document.body.setAttribute('data-time-period', period);
          }

          // Skip intro if already seen or ?skip param
          var introSeen = sessionStorage.getItem('bb_intro_seen');
          var skipParam = params.has('skip');
          var forceIntro = params.has('intro');
          if ((introSeen || skipParam) && !forceIntro) {
              if (logo) logo.classList.add('show-text');
              if (header) header.classList.add('visible', 'lights-on');
              document.body.classList.add('intro-complete', 'intro-scrolled');
              var heroTitle = document.querySelector('.hero__title');
              if (heroTitle) heroTitle.classList.add('hero-animate');
              if (intro) intro.remove();
              initWordmark();
              if (skipParam) sessionStorage.setItem('bb_intro_seen', '1');
              return;
          }

          // Skip for reduced motion
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              if (logo) logo.classList.add('show-text');
              if (header) header.classList.add('visible', 'lights-on');
              document.body.classList.add('intro-complete', 'intro-scrolled');
              var heroTitleRM = document.querySelector('.hero__title');
              if (heroTitleRM) heroTitleRM.classList.add('hero-animate');
              if (intro) intro.remove();
              sessionStorage.setItem('bb_intro_seen', '1');
              return;
          }

          if (!intro || !logo || !header) return;

          document.body.classList.add('intro-playing');

          function preventScroll(e) {
              if (document.body.classList.contains('intro-playing')) {
                  e.preventDefault();
                  e.stopPropagation();
                  return false;
              }
          }

          window.addEventListener('wheel', preventScroll, { passive: false });
          window.addEventListener('touchmove', preventScroll, { passive: false });
          document.addEventListener('keydown', function(e) {
              if (document.body.classList.contains('intro-playing')) {
                  if ([32, 33, 34, 35, 36, 37, 38, 39, 40].includes(e.keyCode)) {
                      e.preventDefault();
                  }
              }
          });

          var introAnimationDuration = 3200;

          setTimeout(function() {
              intro.classList.add('intro--static');
              document.body.classList.remove('intro-playing');
              document.body.classList.add('intro-static', 'intro-complete');
              window.removeEventListener('wheel', preventScroll);
              window.removeEventListener('touchmove', preventScroll);
          }, introAnimationDuration);

          var hasBegun = false;

          function beginSite() {
              if (!document.body.classList.contains('intro-static') || hasBegun) return;
              hasBegun = true;
              sessionStorage.setItem('bb_intro_seen', '1');
              window.scrollTo({ top: window.innerHeight, behavior: 'smooth' });
          }

          document.addEventListener('click', beginSite);
          document.addEventListener('touchstart', beginSite, { passive: true });

          // Scroll handler
          var hasScrolledPastIntro = false;
          var lastScrollY = window.scrollY;
          var ticking = false;
          var isSnapping = false;
          var cachedViewportHeight = window.innerHeight;
          var isIntroStatic = false;
          var isHeaderVisible = false;
          var hintHidden = false;
          var heroTitleEl = document.querySelector('.hero__title');

          var resizeTimeout;
          window.addEventListener('resize', function() {
              clearTimeout(resizeTimeout);
              resizeTimeout = setTimeout(function() {
                  cachedViewportHeight = window.innerHeight;
              }, 150);
          }, { passive: true });

          window.addEventListener('scroll', function() {
              if (!ticking && !isSnapping) {
                  window.requestAnimationFrame(function() {
                      var currentScrollY = window.scrollY;

                      if (!isIntroStatic) {
                          isIntroStatic = document.body.classList.contains('intro-static');
                          if (!isIntroStatic) {
                              ticking = false;
                              return;
                          }
                      }

                      if (!hintHidden && currentScrollY > 50) {
                          intro.classList.add('hint-hidden');
                          hintHidden = true;
                      }

                      if (!hasScrolledPastIntro && currentScrollY > cachedViewportHeight * 0.85) {
                          hasScrolledPastIntro = true;
                          isHeaderVisible = true;
                          document.body.classList.add('intro-scrolled');
                          intro.classList.add('intro--hidden');
                          header.classList.add('visible');
                          logo.classList.add('show-text');
                          initWordmark();
                          setTimeout(function() {
                              header.classList.add('lights-on');
                          }, 400);
                          if (heroTitleEl) {
                              heroTitleEl.classList.add('hero-animate');
                          }
                      }

                      if (hasScrolledPastIntro && currentScrollY < cachedViewportHeight) {
                          window.scrollTo(0, cachedViewportHeight);
                      }

                      if (isHeaderVisible && currentScrollY > cachedViewportHeight + 100) {
                          var shouldHide = currentScrollY > lastScrollY && currentScrollY > cachedViewportHeight + 150;
                          if (shouldHide && !header.classList.contains('hidden-scroll')) {
                              header.classList.add('hidden-scroll');
                          } else if (!shouldHide && header.classList.contains('hidden-scroll')) {
                              header.classList.remove('hidden-scroll');
                          }
                      } else if (header.classList.contains('hidden-scroll')) {
                          header.classList.remove('hidden-scroll');
                      }

                      lastScrollY = currentScrollY;
                      ticking = false;
                  });
                  ticking = true;
              }
          }, { passive: true });

          // Ambient orange light animation (30fps throttled)
          if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              var orangePos1 = 15;
              var orangePos2 = 85;
              var direction1 = 1;
              var direction2 = -1;
              var lightsAnimationId = null;
              var lastLightsFrame = 0;
              var LIGHTS_FRAME_INTERVAL = 1000 / 30;

              function animateLights(timestamp) {
                  if (!header.classList.contains('lights-on')) {
                      lightsAnimationId = requestAnimationFrame(animateLights);
                      return;
                  }

                  if (timestamp - lastLightsFrame < LIGHTS_FRAME_INTERVAL) {
                      lightsAnimationId = requestAnimationFrame(animateLights);
                      return;
                  }
                  lastLightsFrame = timestamp;

                  orangePos1 += direction1 * 0.06;
                  orangePos2 += direction2 * 0.05;

                  if (orangePos1 > 35 || orangePos1 < 10) direction1 *= -1;
                  if (orangePos2 > 90 || orangePos2 < 60) direction2 *= -1;

                  if (headerGlass) {
                      headerGlass.style.setProperty('--orange-pos-1', orangePos1 + '%');
                      headerGlass.style.setProperty('--orange-pos-2', orangePos2 + '%');
                  }
                  lightsAnimationId = requestAnimationFrame(animateLights);
              }
              lightsAnimationId = requestAnimationFrame(animateLights);

              document.addEventListener('visibilitychange', function() {
                  if (document.hidden && lightsAnimationId) {
                      cancelAnimationFrame(lightsAnimationId);
                      lightsAnimationId = null;
                  } else if (!document.hidden && !lightsAnimationId) {
                      lastLightsFrame = 0;
                      lightsAnimationId = requestAnimationFrame(animateLights);
                  }
              });
          }
      })();

      // Pricing gate system
      (function() {
          var modal = document.getElementById('pricingModal');
          var form = document.getElementById('pricingRequestForm');
          var emailInput = document.getElementById('pricingEmail');
          var firstNameInput = document.getElementById('pricingFirstName');
          var submitBtn = document.getElementById('pricingSubmitBtn');
          var emailError = document.getElementById('pricingEmailError');
          var successState = document.getElementById('pricingSuccess');
          var pricingBanner = document.getElementById('pricingBanner');
          var pricingTimeRemaining = document.getElementById('pricingTimeRemaining');

          var hasPricingAccess = false;

          function checkPricingAccess() {
              fetch('/api/pricing/check-access')
                  .then(function(response) { return response.json(); })
                  .then(function(data) {
                      if (data.hasAccess) {
                          hasPricingAccess = true;
                          showPricing();
                          if (data.remainingMinutes) {
                              pricingTimeRemaining.textContent = '~' + data.remainingMinutes;
                          }
                          pricingBanner.style.display = 'block';
                      } else {
                          hidePricing();
                      }
                  })
                  .catch(function() {
                      hidePricing();
                  });
          }

          function showPricing() {
              document.querySelectorAll('.service--gated').forEach(function(card) {
                  card.classList.add('service--unlocked');
              });
          }

          function hidePricing() {
              document.querySelectorAll('.service--gated').forEach(function(card) {
                  card.classList.remove('service--unlocked');
              });
          }

          function openModal() {
              modal.classList.add('is-open');
              document.body.style.overflow = 'hidden';
              emailInput.focus();
          }

          function closeModal() {
              modal.classList.remove('is-open');
              document.body.style.overflow = '';
          }

          function resetModal() {
              form.style.display = '';
              successState.style.display = 'none';
              form.reset();
              emailError.textContent = '';
              emailError.style.display = 'none';
              submitBtn.disabled = false;
              submitBtn.classList.remove('pricing-modal__submit--loading');
          }

          function validateEmail(email) {
              return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
          }

          document.querySelectorAll('[data-pricing-trigger]').forEach(function(btn) {
              btn.addEventListener('click', function(e) {
                  e.preventDefault();
                  if (!hasPricingAccess) {
                      resetModal();
                      openModal();
                  }
              });
          });

          document.querySelectorAll('[data-pricing-close]').forEach(function(el) {
              el.addEventListener('click', closeModal);
          });

          document.addEventListener('keydown', function(e) {
              if (e.key === 'Escape' && modal.classList.contains('is-open')) {
                  closeModal();
              }
          });

          form.addEventListener('submit', function(e) {
              e.preventDefault();

              var email = emailInput.value.trim();
              var firstName = firstNameInput.value.trim();

              if (!email || !validateEmail(email)) {
                  emailError.textContent = 'Please enter a valid email address';
                  emailError.style.display = 'block';
                  emailInput.focus();
                  return;
              }

              emailError.style.display = 'none';
              submitBtn.disabled = true;
              submitBtn.classList.add('pricing-modal__submit--loading');

              fetch('/api/pricing/request-access', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ email: email, firstName: firstName })
              })
              .then(function() {
                  form.style.display = 'none';
                  successState.style.display = 'flex';
              })
              .catch(function() {
                  form.style.display = 'none';
                  successState.style.display = 'flex';
              });
          });

          checkPricingAccess();
      })();

      // Founder Lightbox
      (function() {
          var lightbox = document.getElementById('founderLightbox');
          if (!lightbox) return;

          function openLightbox() {
              lightbox.classList.add('is-open');
              document.body.style.overflow = 'hidden';
          }

          function closeLightbox() {
              lightbox.classList.remove('is-open');
              document.body.style.overflow = '';
          }

          document.querySelectorAll('[data-founder-trigger]').forEach(function(el) {
              el.addEventListener('click', openLightbox);
          });

          document.querySelectorAll('[data-founder-close]').forEach(function(el) {
              el.addEventListener('click', closeLightbox);
          });

          document.addEventListener('keydown', function(e) {
              if (e.key === 'Escape' && lightbox.classList.contains('is-open')) {
                  closeLightbox();
              }
          });
      })();

      // Contact form with AJAX submission
      (function() {
          var form = document.querySelector('.contact-form');
          if (!form) return;

          var submitBtn = form.querySelector('.contact-form__submit');
          var feedback = document.getElementById('formFeedback');
          var formspreeUrl = form.getAttribute('action');

          function validateEmail(email) {
              return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
          }

          function showFieldError(field, message) {
              field.classList.add('contact-form__input--error');
              var errorEl = field.parentElement.querySelector('.contact-form__error');
              if (!errorEl) {
                  errorEl = document.createElement('div');
                  errorEl.className = 'contact-form__error';
                  field.parentElement.appendChild(errorEl);
              }
              errorEl.textContent = message;
              errorEl.classList.add('contact-form__error--visible');
          }

          function clearFieldErrors() {
              form.querySelectorAll('.contact-form__input--error, .contact-form__textarea--error').forEach(function(el) {
                  el.classList.remove('contact-form__input--error', 'contact-form__textarea--error');
              });
              form.querySelectorAll('.contact-form__error').forEach(function(el) {
                  el.classList.remove('contact-form__error--visible');
              });
          }

          form.addEventListener('submit', function(e) {
              e.preventDefault();

              feedback.className = 'contact-form__feedback';
              feedback.textContent = '';
              clearFieldErrors();

              var nameField = form.querySelector('#name');
              var emailField = form.querySelector('#email');
              var messageField = form.querySelector('#message');

              var isValid = true;

              if (!nameField || !nameField.value.trim()) {
                  showFieldError(nameField, 'Please enter your name');
                  isValid = false;
              }

              if (!emailField || !emailField.value.trim()) {
                  showFieldError(emailField, 'Please enter your email');
                  isValid = false;
              } else if (!validateEmail(emailField.value.trim())) {
                  showFieldError(emailField, 'Please enter a valid email address');
                  isValid = false;
              }

              if (!messageField || !messageField.value.trim()) {
                  showFieldError(messageField, 'Please enter a message');
                  if (messageField) messageField.classList.add('contact-form__textarea--error');
                  isValid = false;
              }

              if (!isValid) {
                  var firstError = form.querySelector('.contact-form__input--error, .contact-form__textarea--error');
                  if (firstError) firstError.focus();
                  return;
              }

              submitBtn.disabled = true;
              submitBtn.classList.add('contact-form__submit--loading');

              var formData = {
                  type: 'form',
                  name: nameField.value.trim(),
                  email: emailField.value.trim(),
                  service: form.querySelector('#service') ? form.querySelector('#service').value : '',
                  message: messageField.value.trim()
              };

              fetch(formspreeUrl, {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'Accept': 'application/json'
                  },
                  body: JSON.stringify(formData)
              })
              .then(function(response) {
                  if (response.ok) {
                      feedback.className = 'contact-form__feedback contact-form__feedback--success';
                      feedback.textContent = "Thank you! Your request has been sent. We'll be in touch within 1-2 business days.";
                      form.reset();

                      fetch('/api/notify', {
                          method: 'POST',
                          headers: { 'Content-Type': 'application/json' },
                          body: JSON.stringify(formData)
                      }).catch(function() {});
                  } else {
                      throw new Error('Form submission failed');
                  }
              })
              .catch(function() {
                  feedback.className = 'contact-form__feedback contact-form__feedback--error';
                  feedback.textContent = 'Something went wrong. Please try again or email us directly at hello@bertrandgroup.ca';
              })
              .finally(function() {
                  submitBtn.disabled = false;
                  submitBtn.classList.remove('contact-form__submit--loading');
              });
          });
      })();

      // Section scroll behavior
      (function() {
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

          var sections = Array.from(document.querySelectorAll('.hero, .section'));
          if (!sections.length) return;

          var params = new URLSearchParams(window.location.search);
          var isMobile = window.matchMedia('(max-width: 768px)').matches;
          var scrollMode = params.get('scroll') || (isMobile ? 'fullpage' : 'free');

          function isIntroActive() {
              return document.body.classList.contains('intro-playing') ||
                     !document.body.classList.contains('intro-complete');
          }

          if (scrollMode === 'fullpage') {
              function enableSnapScroll() {
                  if (!document.body.classList.contains('intro-complete')) {
                      setTimeout(enableSnapScroll, 100);
                      return;
                  }
                  document.body.classList.add('scroll-snap-enabled');
              }
              enableSnapScroll();

              window.addEventListener('scroll', function() {
                  if (!document.body.classList.contains('has-scrolled')) {
                      document.body.classList.add('has-scrolled');
                  }
              }, { passive: true });
          }

          if (scrollMode === 'snap') {
              var isSnappingSnap = false;
              var scrollTimeout = null;
              var snapOffset = 220;

              function getClosestSection() {
                  var viewportHeight = window.innerHeight;
                  var closest = null;
                  var closestDistance = Infinity;

                  sections.forEach(function(section) {
                      var rect = section.getBoundingClientRect();
                      var sectionTop = window.scrollY + rect.top - snapOffset;

                      if (rect.top > 0 && rect.top < viewportHeight * 0.4) {
                          if (rect.top < closestDistance) {
                              closest = { top: Math.max(0, sectionTop) };
                              closestDistance = rect.top;
                          }
                      }
                  });
                  return closest;
              }

              window.addEventListener('scroll', function() {
                  if (isSnappingSnap || isIntroActive()) return;
                  clearTimeout(scrollTimeout);
                  scrollTimeout = setTimeout(function() {
                      if (isIntroActive()) return;
                      var closest = getClosestSection();
                      if (closest) {
                          isSnappingSnap = true;
                          window.scrollTo({ top: closest.top, behavior: 'smooth' });
                          setTimeout(function() { isSnappingSnap = false; }, 500);
                      }
                  }, 150);
              }, { passive: true });
          }
      })();

  </script>

  <!-- Floating Phone Button -->
  <a href="tel:+17054133705" class="floating-phone" aria-label="Call Bertrand Group" title="+1 (705) 413-3705">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
      </svg>
  </a>

  <GesturePrevention />
  <VisitorNotify />
</BaseLayout>
