---
/**
 * HeaderMinimal — Minimal header for ad landing pages.
 * Two variants:
 *   - With right-aligned CTA link (e.g., "Get started →")
 *   - Centered logo only (no CTA)
 *
 * Props:
 *   centered — center the logo with no CTA (default: false)
 *   ctaText — text for right-aligned CTA (default: "Get started →")
 *   ctaHref — URL for CTA link (default: #get-started)
 *   variant — 'standard' uses .header/.header__glass, 'ad' uses .ad-header (default: standard)
 */
interface Props {
    centered?: boolean;
    ctaText?: string;
    ctaHref?: string;
    variant?: 'standard' | 'ad';
}

const {
    centered = false,
    ctaText = 'Get started \u2192',
    ctaHref = '#get-started',
    variant = 'standard',
} = Astro.props;
---

{variant === 'ad' ? (
    <header class="ad-header">
        <div class="ad-header__inner">
            <span class="ad-header__logo">
                <img src="/assets/bg-brands-logomark.png" alt="" class="ad-header__logo-icon" width="40" height="40" fetchpriority="high">
                <span class="ad-header__logo-text">Bertrand Group</span>
            </span>
        </div>
    </header>
) : (
    <header class="header">
        <div class="header__glass">
            <div class="header__inner">
                <a href="/?skip" class="header__logo">
                    <img src="/assets/bg-brands-logomark.png" alt="" class="header__logo-icon" width="40" height="40" fetchpriority="high">
                    <span class="header__wordmark">Brands &amp; Web Systems</span>
                </a>
                {!centered && (
                    <a href={ctaHref} style="font-family: var(--font-body); font-size: var(--text-sm); font-weight: 400; color: var(--text-muted); letter-spacing: 0.02em; text-decoration: none; transition: color 0.3s ease;">{ctaText}</a>
                )}
            </div>
        </div>
    </header>
)}

{variant === 'standard' && (
    <script is:inline>
    /* Ambient lighting for minimal header (30fps) */
    (function() {
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

        var header = document.querySelector('.header');
        var headerGlass = document.querySelector('.header__glass');
        if (!header || !headerGlass) return;

        header.classList.add('lights-on');

        var pos1 = 15, pos2 = 85, dir1 = 1, dir2 = -1;
        var lastFrame = 0;
        var FRAME_INTERVAL = 1000 / 30;

        function animateLights(timestamp) {
            if (timestamp - lastFrame < FRAME_INTERVAL) {
                requestAnimationFrame(animateLights);
                return;
            }
            lastFrame = timestamp;
            pos1 += dir1 * 0.06;
            pos2 += dir2 * 0.05;
            if (pos1 > 35 || pos1 < 10) dir1 *= -1;
            if (pos2 > 90 || pos2 < 60) dir2 *= -1;
            headerGlass.style.setProperty('--orange-pos-1', pos1 + '%');
            headerGlass.style.setProperty('--orange-pos-2', pos2 + '%');
            requestAnimationFrame(animateLights);
        }
        requestAnimationFrame(animateLights);
    })();
    </script>
)}
